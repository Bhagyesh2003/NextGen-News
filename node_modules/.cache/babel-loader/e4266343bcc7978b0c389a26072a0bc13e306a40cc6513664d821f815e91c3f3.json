{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"./NewsCard.css\";import Pagination from\"./Pagination\";import Navbar from\"./Navbar\";import{Spinner}from\"react-bootstrap\";// Newscard component definition\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const NewsCard=()=>{// State variables\nconst[mynews,setMyNews]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(0);const[loading,setLoading]=useState(false);const[searchQuery,setSearchQuery]=useState(\"\");const[error,setError]=useState(null);// Function to fetch data from the API\nconst fetchData=async function(page){let query=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"\";setLoading(true);setError(null);// Reset any previous errors\n// Determine the API URL based on the presence of a search query\nlet url=query?\"https://newsapi.org/v2/everything?q=\".concat(query,\"&page=\").concat(page,\"&apiKey=19cdd0eaab164db7a625c6326ffe6ccb\"):\"https://newsapi.org/v2/top-headlines?country=in&page=\".concat(page,\"&apiKey=19cdd0eaab164db7a625c6326ffe6ccb\");try{const res=await fetch(url);const data=await res.json();if(data.articles){setMyNews(data.articles);setTotalPages(Math.ceil(data.totalResults/20));}else{throw new Error(\"Failed to fetch articles\");}}catch(error){setError(error.message);setMyNews([]);setTotalPages(0);}finally{setLoading(false);}};// Effect to fetch data when currentPage or searchQuery changes\nuseEffect(()=>{fetchData(currentPage,searchQuery);},[currentPage,searchQuery]);// Handler for next page button click\nconst handleNextPage=()=>{setCurrentPage(prevPage=>Math.min(prevPage+1,totalPages));};// Handler for previous page button click\nconst handlePrevPage=()=>{setCurrentPage(prevPage=>Math.max(prevPage-1,1));};//Handler for search query\nconst handleSearch=query=>{setSearchQuery(query);setCurrentPage(1);// Reset to first page on new search\n};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{onSearch:handleSearch}),/*#__PURE__*/_jsx(\"div\",{className:\"styling\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})}):error?/*#__PURE__*/ // Show error message if fetch fails\n_jsx(\"div\",{className:\"d-flex justify-content-center text-danger\",children:/*#__PURE__*/_jsx(\"p\",{children:error})}):mynews&&mynews.length>0?// Show articles if data is available\nmynews.map((ele,index)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{width:\"300px\",height:\"400px\",marginLeft:\"8rem\",marginTop:\"2rem\"},children:[/*#__PURE__*/_jsx(\"img\",{src:ele.urlToImage==null?\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSO1WdIW2im6TWTKabcsokQuPJtQ7KpWB_z6g&s\":ele.urlToImage,className:\"card-img-top\",height:\"200px\",alt:\"...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:ele.author==null?\"No Author\":ele.author}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:ele.title}),/*#__PURE__*/_jsx(\"a\",{href:ele.url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"btn btn-primary\",children:\"Read More\"})]})]},index);}):/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No articles found\"})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,totalPages:totalPages,handleNextPage:handleNextPage,handlePrevPage:handlePrevPage}),/*#__PURE__*/_jsx(\"br\",{})]});};export default NewsCard;","map":{"version":3,"names":["React","useEffect","useState","Pagination","Navbar","Spinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NewsCard","mynews","setMyNews","currentPage","setCurrentPage","totalPages","setTotalPages","loading","setLoading","searchQuery","setSearchQuery","error","setError","fetchData","page","query","arguments","length","undefined","url","concat","res","fetch","data","json","articles","Math","ceil","totalResults","Error","message","handleNextPage","prevPage","min","handlePrevPage","max","handleSearch","children","onSearch","className","animation","role","map","ele","index","style","width","height","marginLeft","marginTop","src","urlToImage","alt","author","title","href","target","rel"],"sources":["D:/Coding Stuff/News-app/react-news-portal/src/components/NewsCard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./NewsCard.css\";\r\nimport Pagination from \"./Pagination\";\r\nimport Navbar from \"./Navbar\";\r\nimport { Spinner } from \"react-bootstrap\";\r\n\r\n// Newscard component definition\r\nconst NewsCard = () => {\r\n  // State variables\r\n  const [mynews, setMyNews] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n\r\n  // Function to fetch data from the API\r\n  const fetchData = async (page, query = \"\") => {\r\n    setLoading(true);\r\n    setError(null); // Reset any previous errors\r\n\r\n    // Determine the API URL based on the presence of a search query\r\n    let url = query\r\n      ? `https://newsapi.org/v2/everything?q=${query}&page=${page}&apiKey=19cdd0eaab164db7a625c6326ffe6ccb`\r\n      : `https://newsapi.org/v2/top-headlines?country=in&page=${page}&apiKey=19cdd0eaab164db7a625c6326ffe6ccb`;\r\n\r\n    try {\r\n      const res = await fetch(url);\r\n      const data = await res.json();\r\n      if (data.articles) {\r\n        setMyNews(data.articles);\r\n        setTotalPages(Math.ceil(data.totalResults / 20));\r\n      } else {\r\n        throw new Error(\"Failed to fetch articles\");\r\n      }\r\n    } catch (error) {\r\n      setError(error.message);\r\n      setMyNews([]);\r\n      setTotalPages(0);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Effect to fetch data when currentPage or searchQuery changes\r\n  useEffect(() => {\r\n    fetchData(currentPage, searchQuery);\r\n  }, [currentPage, searchQuery]);\r\n\r\n  // Handler for next page button click\r\n  const handleNextPage = () => {\r\n    setCurrentPage((prevPage) => Math.min(prevPage + 1, totalPages));\r\n  };\r\n\r\n  // Handler for previous page button click\r\n  const handlePrevPage = () => {\r\n    setCurrentPage((prevPage) => Math.max(prevPage - 1, 1));\r\n  };\r\n\r\n  //Handler for search query\r\n  const handleSearch = (query) => {\r\n    setSearchQuery(query);\r\n    setCurrentPage(1); // Reset to first page on new search\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Navbar with search functionality */}\r\n      <Navbar onSearch={handleSearch} />\r\n      <div className=\"styling\">\r\n        {/* Show loading spinner */}\r\n        {loading ? (\r\n          <div className=\"d-flex justify-content-center\">\r\n            <Spinner animation=\"border\" role=\"status\">\r\n              <span className=\"visually-hidden\">Loading...</span>\r\n            </Spinner>\r\n          </div>\r\n        ) : error ? (\r\n          // Show error message if fetch fails\r\n          <div className=\"d-flex justify-content-center text-danger\">\r\n            <p>{error}</p>\r\n          </div>\r\n        ) : mynews && mynews.length > 0 ? (\r\n          // Show articles if data is available\r\n          mynews.map((ele, index) => {\r\n            return (\r\n              <div\r\n                key={index}\r\n                className=\"card\"\r\n                style={{\r\n                  width: \"300px\",\r\n                  height: \"400px\",\r\n                  marginLeft: \"8rem\",\r\n                  marginTop: \"2rem\",\r\n                }}\r\n              >\r\n                <img\r\n                  src={\r\n                    ele.urlToImage == null\r\n                      ? \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSO1WdIW2im6TWTKabcsokQuPJtQ7KpWB_z6g&s\"\r\n                      : ele.urlToImage\r\n                  }\r\n                  className=\"card-img-top\"\r\n                  height=\"200px\"\r\n                  alt=\"...\"\r\n                />\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title\">\r\n                    {ele.author == null ? \"No Author\" : ele.author}\r\n                  </h5>\r\n                  <p className=\"card-text\">{ele.title}</p>\r\n                  <a\r\n                    href={ele.url}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"btn btn-primary\"\r\n                  >\r\n                    Read More\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <div className=\"d-flex justify-content-center\">\r\n            <p>No articles found</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <br />\r\n      {/* Pagination component */}\r\n      <Pagination\r\n        currentPage={currentPage}\r\n        totalPages={totalPages}\r\n        handleNextPage={handleNextPage}\r\n        handlePrevPage={handlePrevPage}\r\n      />\r\n      <br />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NewsCard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}